var app=angular.module("resourcesApp",["ngRoute","ui.calendar"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"templates/home.html"}),a.when("/login",{templateUrl:"templates/login.html"}),a.when("/resources",{templateUrl:"templates/resources_view.html"}),a.otherwise({redirectTo:"/"}),window.history&&window.history.pushState}]),app.controller("loginController",["$scope","$http",function(a,b){a.test=function(){b({url:baseUrl+"/test",method:"GET"}).then(function(a){console.log(a)},function(a){console.log(a)})}}]),app.controller("mainController",["$scope","$http","$rootScope",function(a,b,c){c.baseUrl="http://localhost:8888/api/public",c.makeRequest=function(a,d,e,f){e||(e=null),b({url:c.baseUrl+d,method:a,data:e,transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){f(a)},function(a){console.log(a)})}}]),app.controller("resourceViewController",["$scope","$http","$rootScope",function(a,b,c){a.creatingBooking=!1,a.eventSources=[{events:[],color:"#1694CB",textColor:"white"}],c.makeRequest("GET","/booking",null,function(b){angular.forEach(b.data,function(b,c){var d={arrayIndex:c,title:b.title,start:b.start_date,end:b.end_date,id:b.id,notes:b.notes,resourceName:b.resource_name,projectName:b.project_name,createdBy:b.created_by};a.eventSources[0].events.push(d)})}),a.uiConfig={calendar:{height:"100%",editable:!0,selectable:!0,selectHelper:!0,allDayDefault:!0,header:{left:"month basicWeek basicDay agendaWeek agendaDay",center:"title",right:"today prev,next"},eventClick:function(b){a.showBookingData=!0,a.bookingToDisplay=a.eventSources[0].events[b.arrayIndex]},eventDrop:function(a,b,c){console.log(a.start.format())},select:function(b,c,d){a.creatingBooking=!0,a.bookingDates={startDate:b.format(),endDate:c.format()}},eventResize:function(a,b,d){if(confirm("The end date for "+a.title+" will be changed to: "+a.end.format())){var e=new FormData;e.append("id",a.id),e.append("propertyToUpdate","end_date"),e.append("updateValue",a.end.format()),c.makeRequest("POST","/booking/update",e,function(a){console.log(a)})}else d()}}},a.closeForm=function(){$("#bookingTitle")[0].value="",$("#bookingNotes")[0].value="",$("#resourceName")[0].value="",$("#projectName")[0].value="",a.creatingBooking=!1,a.showBookingData=!1},a.addBookingToCalendar=function(a,b){$(a).fullCalendar("renderEvent",{title:b.get("title"),start:b.get("start_date"),end:b.get("end_date")},!0)},a.addBookingToDb=function(b){var d=new FormData;d.append("start_date",b.startDate),d.append("end_date",b.endDate),d.append("title",$("#bookingTitle")[0].value),d.append("notes",$("#bookingNotes")[0].value),d.append("resource_name",$("#resourceName")[0].value),d.append("project_name",$("#projectName")[0].value),c.makeRequest("POST","/booking",d,function(b){console.log(b),a.addBookingToCalendar("#resourceCalendar",d)}),a.closeForm()}}]);